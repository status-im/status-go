ALTER TABLE chats ADD COLUMN community_id TEXT DEFAULT "";
UPDATE chats SET community_id = "";

ALTER TABLE user_messages ADD COLUMN community_id TEXT DEFAULT "";

CREATE TABLE IF NOT EXISTS communities_communities (
  id BLOB NOT NULL PRIMARY KEY ON CONFLICT REPLACE,
  private_key BLOB,
  description BLOB NOT NULL,
  joined BOOL NOT NULL DEFAULT FALSE,
  verified BOOL NOT NULL DEFAULT FALSE
  );

INSERT INTO communities_communities ("id", "private_key", "description", "joined", "verified") VALUES (X'039b2da47552aa117a96ea8f1d4d108ba66637c7517a3c94a57b99dbb8a002eda2', NULL, X'0a41ef32d114dae8fed2b8ed23afc4ec1d2c5b94597c96b1484adf005d86954ac0d87b055f01a0b6f2452df2e29a428beb604c7bba39c87fbb52fab3a02f07a223570012a618081a1289010a840130783034663161623936356133646236343333393233636562613034383866663630356632333061636134633463393362623635363363313062373030636664626265643261333634633938306239636639363739663335323538346434646134346363303166633165373235376631643262383066666666356166363461613132396612001289010a840130783034353665656264343537636365623964643730396161643833643466653561373738616233363136303462386439626632356461666639316666636662383231373232616461363734623432656264666230623233316331656635653539396261393431326361636464323465626433343037623364663937313334346635383512001289010a840130783034373861366630373534353236633439393935326162656662303366303230363861663639663665316430343331393730626631393433663763656666666330303432663637326265653762336236353239376164366432343064313162623231383265346664643965643335613838663062383666663835303332333936633112001289010a840130783034313738613734616336643961383362363937373664633535353637353530356531393338386362326138393965663264656633323762623137363334366531326139393265613139353438626663306662373834326166333139663537323865366633636136316466323430343466636235383333646536633434376362623912001289010a840130783034306332623963663933336635396535303466666230626365383237656534336265366530653231613034313966316331613032396164303334653565626134306464373232626433633661326336303865663263623038613063613534303039656131623832303130366661663463643030393637626439346530303162303712001289010a840130783034313263633531333336623231356331613132613535373033333739383365373563383464313931383633363539363564323236353337386666303639623565623764343434323763646261323934646162396563353133333465656137316333396332323236663031346266343335363330613336363038666361356363363012001289010a840130783034323336666130333362613966626161356665306536663030646238653832306164336536613533643166663531613730633563366262313632623030303532616231303635393534386366653436613736613963363435373562623037373764633864666463393762333134613334643838653861636330386463376664326112001289010a840130783034646237313962663939626565383137633937636162393039633638326434336531666661353863346632346564616130636237653937653637373964626664343466343330643961343737376530666161343564373462646265373032343063626561396462386532636639613831313133373465663466356435306163323412001289010a840130783034653235646136393934656132646334616337303732376530376563613135336165393262663736303964623762656662376562646365616164333438663466633535626265393061626639353031313736333031646235616131303366633065623362633337353032373261323663343234613130383837646232613765613812001289010a840130783034333430636236643764646565313330323637366662396537613462333364653632633766346665393064613131656465633664323432643430313033643136333461623962353931613865616163643065343934656534386337343261343465646461386431643765636664386239393962353431333265316663356435613412001289010a840130783034313761393061343039656462343761646136396333666366363535656335306563363566306131633364633137613634633164646533633734346666343262336233626437616433303465663238323335353433643838376333313131393933373633383536396536313261663438363164623463333761353238386466366512001289010a840130783034623961656236383566616135346264633734313666333862376435306237343936366364663233653163366133313834613063323261323635393137663333303934613431393762306437613939623266333131353763666461653232663838323261313031353765626335326463363665333236653834316331653833313012001289010a840130783034323631633535363735653535666632356564623530623334356366623361336633356636303731326432353163626161616239376264353030353463366562633363643465323232303063363864616637343933653166386461366131393061363861363731653264333937373830393631323432346337633338383862633612001289010a840130783034633230336264656464313838383466653830333835666363663136653966363132653462363461376661393863376462393438383265643237643138343264623435393536366533323361356362653633383663356665366337383133316133326661613439643833373863333730636462353361303763666538613636323612001289010a840130783034346633313562363339366437623538653930353233336336376233383033636265613261663231646563653332636339613832626339356264343635616233306566666536633130336637373762363863376462373166373966346565366130646565633235306539373838623331376637653931303133316130333765346412001289010a840130783034346434383836306538363361393236653564623434636134363663316266636363623336613838383763366333656430306433343333623433386661323135303631373462623733646262653165663537623232353037353834386265626263666462616435383337663033373266393338363964353165343839343633633612001289010a840130783034366635306431313062333563383663313265333536373463303264633637343434653061636238366265363732373237386361393633386364646563373935343931333531616239313935623663326661663961396337373138623062653933363966353630373039356434643037376337666435613935656165353934643612001289010a840130783034373035306531633931616363323164313636666236623130376233366264663362313532626666303166363937333865616537393362616532373936613738633566336639356635326639303634316133373435633031623632653536363635613565313339613438396131396331313865366237373934616538383764653212001289010a840130783034623932373838373066396134343634386632306438366166636564653235353863306363393636623130623338356236333936663334666164383038313838663136356537373763333030383538633364666531396431356664653534333830363635656634613737623261363637353761356338303732303361363964316312001289010a840130783034643863303764643133376264316237336136663531646631343862346637376464616131313230396433366534336438333434633061376436646231636164363038356632376366623735646433616532316438366365666665626534636638613335623963653864323662616131396463323634656665366438663232316212001a0218022a7322065374617475732a69537461747573206973206120736563757265206d6573736167696e67206170702c2063727970746f2077616c6c65742c20616e6420576562332062726f77736572206275696c742077697468207374617465206f66207468652061727420746563686e6f6c6f67792e325f0a2435633332386635342d346434302d343938342d616539362d6239343632343764386462611237120218011a3122087374616e647570732a257374616e6475707320666f722053746174757320636f726520636f6e7472696275746f727332580a2463323766306263342d313430642d343934632d626564342d3861396435643330376431351230120218011a2a220d616e6e6f756e63656d656e74732a19416e6e6f756e63656d656e74732066726f6d205374617475731819', 0, 1);
